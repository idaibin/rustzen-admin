â¸»

# ğŸ“¦ Rust é¡¹ç›®æ•°æ®åº“è¿ç§»è§„èŒƒï¼ˆrustzen-adminï¼‰

> æœ¬æ–‡æ¡£ä¸º rustzen-admin é¡¹ç›®è®¾è®¡çš„æ•°æ®åº“è¿ç§»è§„èŒƒï¼Œéµå¾ªâ€œæ¨¡å—åˆ†ç»„ + å®‰å…¨é¡ºåº + Zen é£æ ¼â€ï¼Œç¡®ä¿è¿ç§»æ¸…æ™°æœ‰åºã€ç»“æ„å¯æ‰©å±•ã€ä¾èµ–ä¸å‡ºé”™ï¼Œé€‚ç”¨äºä¸­å¤§å‹ Rust Web é¡¹ç›®ã€‚

---

## âœ³ï¸ å‘½åè§„åˆ™æ¦‚è§ˆ

è¿ç§»æ–‡ä»¶ç»Ÿä¸€æ ¼å¼å¦‚ä¸‹ï¼š

```text
{æ¨¡å—åˆ†ç±»ç¼–å·}{æ¨¡å—ç¼–å·}{æ­¥éª¤ç¼–å·}_{åŠ¨ä½œ}_{å¯¹è±¡}.sql

å‘½åç¤ºä¾‹ï¼š

æ–‡ä»¶å	å«ä¹‰
100100_create_user.sql	ç”¨æˆ·æ¨¡å—åˆ›å»ºè¡¨
100200_create_role.sql	è§’è‰²æ¨¡å—åˆ›å»ºè¡¨
107000_view_user.sql	ç”¨æˆ·ç›¸å…³è§†å›¾ï¼ˆå«å…³è”æŸ¥è¯¢ï¼‰
108000_func_user.sql	ç”¨æˆ·æ¨¡å—ç›¸å…³å‡½æ•°
109000_seed_user.sql	ç”¨æˆ·æ¨¡å—åˆå§‹æ•°æ®


â¸»

ğŸ“¦ ç›®å½•ç»“æ„ç¤ºä¾‹ï¼ˆZen è§„èŒƒ + å†å²å½’æ¡£ï¼‰

migrations/
â”œâ”€â”€ 100100_create_user.sql
â”œâ”€â”€ 100200_create_role.sql
â”œâ”€â”€ 100300_create_menu.sql
â”œâ”€â”€ 100400_create_log.sql
â”œâ”€â”€ 100500_create_user_role.sql
â”œâ”€â”€ 100600_create_role_menu.sql
â”œâ”€â”€ 100700_create_dict.sql
â”œâ”€â”€ 100800_create_foreign_keys.sql
â”œâ”€â”€ 100900_create_triggers.sql
â”œâ”€â”€ 107000_view_user_with_roles.sql
â”œâ”€â”€ 107001_view_user_permissions.sql
â”œâ”€â”€ 107002_view_user_menu_info.sql
â”œâ”€â”€ 107003_view_user_info_summary.sql
â”œâ”€â”€ 107004_view_user_info_stats.sql
â”œâ”€â”€ 107005_view_recent_operations.sql
â”œâ”€â”€ 107006_view_user_activity_summary.sql
â”œâ”€â”€ 108000_func_user_role.sql
â”œâ”€â”€ 108001_func_user_menu_data.sql
â”œâ”€â”€ 108002_func_user_basic_info.sql
â”œâ”€â”€ 108003_func_user_permissions.sql
â”œâ”€â”€ 108004_func_user_has_permission.sql
â”œâ”€â”€ 108005_func_login_credentials.sql
â”œâ”€â”€ 108006_func_log_operation.sql
â”œâ”€â”€ 108007_func_log_operations_bulk.sql
â”œâ”€â”€ 108008_func_create_log_partition.sql
â”œâ”€â”€ 108009_func_manage_log_partitions.sql
â”œâ”€â”€ 108010_func_get_log_partition_info.sql
â”œâ”€â”€ 108011_func_analyze_user_query_performance.sql
â”œâ”€â”€ 109000_seed_user.sql
â”œâ”€â”€ 109001_seed_menu.sql
â”œâ”€â”€ 109002_seed_role.sql
â”œâ”€â”€ 109003_seed_dict.sql
â”œâ”€â”€ 109004_seed_log.sql
â”œâ”€â”€ legacy/
â”‚   â”œâ”€â”€ 001_system_schema.sql
â”‚   â”œâ”€â”€ 002_system_seed.sql
â”‚   â”œâ”€â”€ 003_log_system.sql
â”‚   â””â”€â”€ 004_user_info_optimization.sql

â¸»

ğŸ“ æ¨¡å—ç¼–å·è§„èŒƒ

æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç¼–å·åŒºé—´é¢„ç•™ 100 ä¸ªèŒƒå›´ï¼Œä¾¿äºæ‰©å±•ï¼š

æ¨¡å—ç±»åˆ«	èµ·å§‹ç¼–å·	ç¤ºä¾‹æ–‡ä»¶
ç³»ç»Ÿè®¾ç½®	100000	100000_create_setting.sql
ç”¨æˆ·ç®¡ç†	100100	100100_create_user.sql
è§’è‰²æƒé™	100200	100200_create_role.sql
èœå•ç»“æ„	100300	100300_create_menu.sql
æ—¥å¿—å®¡è®¡	100400	100400_create_log.sql
æ•°æ®å­—å…¸	100500	100500_create_dict.sql
é€šç”¨æšä¸¾	100600	100600_create_enum.sql

ğŸš¨ è‹¥è·¨æ¨¡å—ä½¿ç”¨ï¼ˆå¦‚ user view ä¾èµ– roleï¼‰ï¼Œè¯·å°† Viewã€Func ç­‰å»¶åç»Ÿä¸€é›†ä¸­åœ¨ 1097xx~1099xxã€‚

â¸»

ğŸ”„ æ–‡ä»¶ç±»å‹ä¸æ‰§è¡Œé¡ºåº

é¡ºåº	ç±»å‹	ç¼–å·èŒƒå›´	æ–‡ä»¶å‘½åç¤ºä¾‹	è¯´æ˜
1ï¸âƒ£	è¡¨ç»“æ„å®šä¹‰	100000+	100100_create_user.sql	æ‰€æœ‰è¡¨ç»“æ„ï¼Œå¿…é¡»å…ˆæ‰§è¡Œ
2ï¸âƒ£	ç´¢å¼•ä¼˜åŒ–	åˆå¹¶è‡³è¡¨ç»“æ„	åŒä¸Š	ç´¢å¼•å»ºè®®ä¸å»ºè¡¨ä¸€èµ·å†™å…¥ï¼Œé¿å…ç¢ç‰‡åŒ–
3ï¸âƒ£	è§†å›¾å®šä¹‰	107000+	107999_view_user.sql	éœ€ç­‰å¾…ä¾èµ–çš„è¡¨å­˜åœ¨åæ‰§è¡Œ
4ï¸âƒ£	å‡½æ•°å®šä¹‰	108000+	108000_func_user.sql	ä¾èµ–è§†å›¾/è¡¨ï¼Œå¿…é¡»å»¶åæ‰§è¡Œ
5ï¸âƒ£	æ•°æ®åˆå§‹åŒ–	109000+	109999_seed_user.sql	æ’å…¥åŸºç¡€æ•°æ®ï¼Œç»“æ„å»ºç«‹å®Œæ¯•åæ‰§è¡Œ


â¸»

ğŸ§˜ Zen é£æ ¼è®¾è®¡å»ºè®®
	â€¢	âœ… æ¯ä¸ªæ¨¡å—ä¿æŒæ¸…æ™°ç¼–å·ï¼Œè§£è€¦æ‰§è¡Œé¡ºåº
	â€¢	âœ… æ‰€æœ‰è§†å›¾å’Œå‡½æ•°é›†ä¸­ç¼–å·æ®µç»´æŠ¤ï¼Œé¿å…å¾ªç¯ä¾èµ–
	â€¢	âœ… ä¿æŒå‘½åè¯­ä¹‰æ˜ç¡®ï¼šcreate_ã€view_ã€func_ã€seed_
	â€¢	âœ… æ‰€æœ‰ SQL æ–‡ä»¶å¯é˜…è¯»ã€å¯ç»´æŠ¤ã€å¯å¤ç”¨

â¸»

ğŸ§ª ç¤ºä¾‹ï¼šç”¨æˆ·æ¨¡å— SQL æ–‡ä»¶

migrations/
â”œâ”€â”€ 100100_create_user.sql          # å»ºè¡¨ + ç´¢å¼•
â”œâ”€â”€ 107000_view_user.sql           # è”è¡¨ user + roles
â”œâ”€â”€ 108000_func_user.sql           # ç™»å½•éªŒè¯ã€æƒé™æ£€æŸ¥
â”œâ”€â”€ 109000_seed_user.sql           # æ’å…¥ admin è´¦å·


â¸»

ğŸ§± å‡½æ•°ä¾èµ–æ³¨æ„äº‹é¡¹

PostgreSQL ä¸­å‡½æ•°åœ¨â€œå®šä¹‰æ—¶â€éªŒè¯ä¾èµ–ï¼Œä¸æ˜¯æ‰§è¡Œæ—¶ï¼

å› æ­¤ï¼š
	â€¢	â— å‡½æ•°ä½¿ç”¨çš„ è¡¨ã€è§†å›¾ã€å‡½æ•° éƒ½å¿…é¡»åœ¨å®ƒä¹‹å‰å­˜åœ¨ï¼›
	â€¢	â— æ‰€ä»¥å‡½æ•°æ–‡ä»¶åŠ¡å¿…åœ¨æ‰€æœ‰ä¾èµ–å¯¹è±¡ ä¹‹åæ‰§è¡Œï¼ˆå»ºè®®åœ¨ 108000+ èŒƒå›´ï¼‰ï¼›

â¸»

ğŸ¯ å‘½åé£æ ¼æ¨èï¼ˆä»¥ user ä¸ºä¾‹ï¼‰

ç±»å‹	å‘½åç¤ºä¾‹	è¯´æ˜
è¡¨ç»“æ„	100100_create_user.sql	user è¡¨å®šä¹‰ï¼Œå«å­—æ®µã€ç´¢å¼•ã€çº¦æŸç­‰
è§†å›¾	107000_view_user.sql	user + roles è”è¡¨æŸ¥è¯¢å°è£…
å‡½æ•°	108000_func_user.sql	get_user_basicã€check_permission
åˆå§‹åŒ–æ•°æ®	109000_seed_user.sql	åˆå§‹è¶…çº§ç®¡ç†å‘˜è´¦å·


â¸»

ğŸ“Œ å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰

Q: è§†å›¾æ˜¯å¦å¿…é¡»è·¨è¡¨æ‰å®šä¹‰ï¼Ÿ

A: ä¸å¿…é¡»ã€‚å¦‚æœå•è¡¨å­—æ®µæ˜ å°„å¤æ‚æˆ–å¤šæ¬¡å¤ç”¨ï¼Œä¹Ÿå»ºè®®å®šä¹‰ View ç®€åŒ–ä»£ç ã€‚

Q: å‡½æ•°å¯ä»¥åªç”¨ SQL å®ç°å—ï¼Ÿ

A: æ˜¯çš„ã€‚å°è£…æŸ¥è¯¢é€»è¾‘ã€æƒé™åˆ¤æ–­ã€èšåˆç»Ÿè®¡ç­‰ï¼Œéƒ½é€‚åˆç”¨ SQL å‡½æ•°å®ç°ï¼Œæé«˜æ€§èƒ½å’Œå¤ç”¨æ€§ã€‚

Q: æ–‡ä»¶è¿‡å¤šæ€ä¹ˆåŠï¼Ÿ

A: æ¨¡å—ç»Ÿä¸€å‘½åã€é›†ä¸­ç¼–å·è®¾è®¡ï¼Œå³ä½¿å‡ åä¸ªæ–‡ä»¶ä¹Ÿä¸ä¼šæ··ä¹±ã€‚

â¸»

ğŸ§© ç¤ºä¾‹æ¨èç¼–å·

ç±»å‹	ç¼–å·èŒƒå›´	ç¤ºä¾‹æ–‡ä»¶
è¡¨ç»“æ„	100100	100100_create_user.sql
è§†å›¾	107000	107000_view_user.sql
å‡½æ•°	108000	108000_func_user.sql
åˆå§‹åŒ–	109000	109000_seed_user.sql


â¸»

ğŸ§­ ç»“è¯­

è¯¥è§„èŒƒå·²åœ¨ rustzen-admin é¡¹ç›®ä¸­å®è·µå¹¶éªŒè¯ï¼Œé€‚ç”¨äºå¤šæ¨¡å—ã€å¼ºä¾èµ–ã€é•¿ç”Ÿå‘½å‘¨æœŸé¡¹ç›®ã€‚å¦‚æœä½ æƒ³è®©ä½ çš„ Rust Web é¡¹ç›®å…·å¤‡è‰¯å¥½å¯ç»´æŠ¤æ€§ã€å¼ºå¥çš„æ•°æ®å±‚ç»“æ„ï¼Œå»ºè®®å…¨é¢é‡‡ç”¨ã€‚

æ¬¢è¿åœ¨ä½ çš„é¡¹ç›®æˆ–åšå®¢ä¸­å¼•ç”¨æ­¤è§„èŒƒï¼Œå¦‚éœ€ååŠ©æ•´åˆé¡¹ç›®ç»“æ„ï¼Œå¯è”ç³»ä½œè€…ç»§ç»­ä¼˜åŒ–ã€‚

```
